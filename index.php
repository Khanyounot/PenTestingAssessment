<!-- Created by Adam Godwin -->
<!DOCTYPE html>
<html>
	<head>
		<title>Secure Student App</title>

		<meta name="viewport" content="width=device-width, initial-scale=1.0" />

		<style>
			@import url('https://fonts.googleapis.com/css?family=Fredoka+One');

			body {
				font-family: 'Fredoka One';
				color: #333;
				display: grid;
				grid-template-areas:
					'header'
					'signin';
			}

			header {
				grid-area: header;
				text-align: center;
				margin-top: 3vh;
			}

			section {
				grid-area: signin;
				align-self: center;
				justify-self: center;
				text-align: center;
				margin: 5vh;
				padding: 5vh;
				width: 40vw;
				height: 60vh;
			}
			
			input["text"], input["password"] {
				width: 30vw;
			}

			footer {
				grid-area: footer;
				text-align: center;
			}
		</style>

		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

		<script type="text/javascript">
			$(document).ready(function () {
				$('#username').select();

				/*
				Listen for signin form to be submitted
				Send the username and password to signin.php to validate
				Redirect to home.php if valid credentials
				*/
				$('#signinForm').submit(function (event) {
					$.ajax({
						type: 'POST',
						url: 'signin.php',
						dataType: 'json',
						data: {
							username: $('#username').val(),
							password: $('#password').val(),
						},
						success: function (returnedData) {
							if (returnedData.valid != 'true') {
								$('#username').val('');
								$('#username').select();

								$('#password').val('');
							} else {
								$(location).attr('href', 'home.php');
							}
						},
					});

					event.preventDefault();
				});
			});
		</script>
	</head>

	<body>
		<header>
			<h1>
				Secure Student App
			</h1>
		</header>
		<section>
			<form id="signinForm">
				<input type="text" id="username" placeholder="Username" autocomplete="off" />
				<input type="password" id="password" placeholder="Password" autocomplete="off" />
				<input type="submit" id="submit" value="Signin" />
			</form>
		</section>
	</body>
</html>